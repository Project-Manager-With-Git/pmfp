import unittest
import requests


def setUpModule():
    print("setUp " + __name__.split(".")[-1])


def tearDownModule():
    print("tearDown " + __name__.split(".")[-1])


class TestAdd(unittest.TestCase):
    @classmethod
    def setUpClass(cls):
        print("setUpClass" + cls.__name__)
        cls.BASE_URL = 'http://localhost:5555/api/task/apply'

    @classmethod
    def tearDownClass(cls):
        print("tearDownClass" + cls.__name__)

    def setUp(self):
        print("instance setUp")

    def tearDown(self):
        print("instance tearDown")

    def test_add_1_2(self):
        q = requests.post(self.BASE_URL + "/example::add", json={
            "args": [1, 2]
        })
        self.assertEqual(q.json().get("result"), 3)


def add_suite():
    suite = unittest.TestSuite()
    suite.addTest(TestAdd("test_add_1_2"))
    return suite


if __name__ == '__main__':
    runner = unittest.TextTestRunner(verbosity=2)
    test_suite = add_suite()
    runner.run(test_suite)
